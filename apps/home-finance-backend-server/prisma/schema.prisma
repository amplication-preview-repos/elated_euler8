datasource db {
  provider = "postgresql"
  url      = env("DB_URL")
}

generator client {
  provider = "prisma-client-js"
}

model BankAccount {
  accountNumber String?
  bankName      String?
  createdAt     DateTime      @default(now())
  id            String        @id @default(cuid())
  transactions  Transaction[]
  updatedAt     DateTime      @updatedAt
  user          User?         @relation(fields: [userId], references: [id])
  userId        String?
}

model Transaction {
  amount        Decimal
  bankAccount   BankAccount? @relation(fields: [bankAccountId], references: [id])
  bankAccountId String?
  createdAt     DateTime     @default(now())
  creditCard    CreditCard?  @relation(fields: [creditCardId], references: [id])
  creditCardId  String?
  date          DateTime?
  id            String       @id @default(cuid())
  tags          String?
  user          User?        @relation(fields: [userId], references: [id])
  userId        String?
}

model CreditCard {
  cardHolderName String?
  cardNumber     String?
  createdAt      DateTime      @default(now())
  expiryDate     DateTime?
  id             String        @id @default(cuid())
  transactions   Transaction[]
  updatedAt      DateTime      @updatedAt
  user           User?         @relation(fields: [userId], references: [id])
  userId         String?
}

model User {
  bankAccounts BankAccount[]
  createdAt    DateTime      @default(now())
  creditCards  CreditCard[]
  email        String?       @unique
  firstName    String?
  id           String        @id @default(cuid())
  lastName     String?
  password     String
  roles        Json
  transactions Transaction[]
  updatedAt    DateTime      @updatedAt
  username     String        @unique
}
